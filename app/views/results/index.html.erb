<br><br><br>
<h3>Resultados</h3>

<!--Version individual-->
<%#= area_chart @results.group_by_month(:date).sum(:hundred_mts), max: (@promedio_100*2) , xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ","%>
<!--Version grupal-->
<%#= area_chart Result.group_by_month(:date).sum(:two_hundred_mts), xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ","%>

<!--2 formas distintas-->
<%#= area_chart @results.group_by_month(:date).sum(:hundred_mts) , xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ","%>
<%#= area_chart [
  {name: "Resultados", data: (@results.group_by_month(:date).sum(:hundred_mts)) },
  {name: "Promedio", data: (Result.group_by_month(:date).maximum(:hundred_mts))},
], xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ","%>
<div class="input-group date">
  <input type="text" id="rangepicker" >
</div>


<div class="row">
  <div class="col-md-6">
    <h4>100 mts</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date, range: @range).maximum(:hundred_mts)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date, range: @range).minimum(:hundred_mts)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date, range: @range).minimum(:hundred_mts))},
    ], xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
  <div class="col-md-6">
    <h4>200 mts</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date).maximum(:two_hundred_mts)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date).minimum(:two_hundred_mts)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date).minimum(:two_hundred_mts))},
    ], xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
  <div class="col-md-6">
    <h4>300 mts</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date).maximum(:three_hundred_mts)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date).minimum(:three_hundred_mts)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date).minimum(:three_hundred_mts))},
    ], xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
  <div class="col-md-6">
    <h4>400 mts</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date).maximum(:four_hundred_mts)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date).minimum(:four_hundred_mts)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date).minimum(:four_hundred_mts))},
    ], xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
  <div class="col-md-6">
    <h4>800 mts</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date).maximum(:eight_hundred_mts)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date).minimum(:eight_hundred_mts)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date).minimum(:eight_hundred_mts))},
    ], xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
  <div class="col-md-6">
    <h4>1000 mts</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date).maximum(:thousand_mts)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date).minimum(:thousand_mts)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date).minimum(:thousand_mts))},
    ], xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
  <div class="col-md-6">
    <h4>1500 mts</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date).maximum(:thousand_five_hundred_mts)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date).minimum(:thousand_five_hundred_mts)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date).minimum(:thousand_five_hundred_mts))},
    ], xtitle: "Fecha", ytitle: "Tiempo", suffix: " seg", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
  <div class="col-md-6">
    <h4>Test de Copper</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date).minimum(:cooper_test)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date).maximum(:cooper_test)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date).maximum(:cooper_test))},
    ], xtitle: "Fecha", ytitle: "Distancia", suffix: "mts", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
  <div class="col-md-6">
    <h4>Sentadilla Máximo</h4>
    <%= line_chart [
      {name: "Peor Marca", data: (@results.group_by_month(:date).minimum(:squat_rm)) },
      {name: "Mejor Marca", data: (@results.group_by_month(:date).maximum(:squat_rm)) },
      {name: "Mejor Marca General", data: (Result.group_by_month(:date).maximum(:squat_rm))},
    ], xtitle: "Fecha", ytitle: "Peso", suffix: " Kg", thousands: ".",decimal: ",", messages: {empty: "No hay Información"} %>
  </div>
</div>

<%= link_to 'New Result', new_user_result_path(params[:user_id]) %>
|
<% if can?(:create, :program)%>
  <%= link_to 'Volver', user_contracts_path %>
<% else %>
  <%= link_to 'Volver', profile_path %>
<% end %>

<%= form_tag user_results_path, method: :get do %>
  <%= hidden_field_tag :start %>
  <%= hidden_field_tag :end %>
<% end %>

<script>
  $("#rangepicker").daterangepicker({
    startDate: moment("<%= l @inicio_graf, format: '%Y-%m-%d' %>"),
    endDate: moment("<%= l @fin_graf, format: '%Y-%m-%d' %>"),
    "locale": {
        "format": "DD/MM/YYYY",
        "separator": " - ",
        "applyLabel": "Aplicar",
        "cancelLabel": "Cancelar",
        "fromLabel": "From",
        "toLabel": "To",
        "customRangeLabel": "Custom",
        "daysOfWeek": [
            "Do",
            "Lu",
            "Ma",
            "Mi",
            "Ju",
            "Vi",
            "Sá"
        ],
        "monthNames": [
            "Enero",
            "Febrero",
            "Marzo",
            "Abril",
            "Mayo",
            "Junio",
            "Julio",
            "Agosto",
            "Septiembre",
            "Octubre",
            "Noviembre",
            "Diciembre"
        ],
        "firstDay": 1
    }
  }, function(start, end, label) {
    $("#start").val(start.format('YYYY-MM-DD'));
    $("#end").val(end.format('YYYY-MM-DD'));

    $("form").submit();
  });
</script>
